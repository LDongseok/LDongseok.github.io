<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Research Chat</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <script>
        // Firebase 설정
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // 댓글 작성 함수
        function postComment() {
            const commentInput = document.getElementById("commentInput").value;
            if (commentInput.trim() === "") return;

            const commentData = {
                text: commentInput,
                timestamp: new Date().toLocaleString()
            };

            db.ref("comments").push(commentData);
            document.getElementById("commentInput").value = "";
        }

        // 댓글 불러오기 함수
        function loadComments() {
            db.ref("comments").on("child_added", (snapshot) => {
                const comment = snapshot.val();
                const commentList = document.getElementById("commentList");

                const commentItem = document.createElement("div");
                commentItem.classList.add("comment");
                commentItem.innerHTML = `
                    <p>${comment.text}</p>
                    <span class="timestamp">${comment.timestamp}</span>
                    <button onclick="deleteComment('${snapshot.key}')">Delete</button>
                `;

                commentList.appendChild(commentItem);
            });
        }

        // 댓글 삭제 함수 (관리자용)
        function deleteComment(commentId) {
            db.ref("comments/" + commentId).remove();
            location.reload(); // 삭제 후 새로고침
        }

        window.onload = loadComments;
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .comment-box {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 80%;
        }
        .comment {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            position: relative;
        }
        .timestamp {
            font-size: 0.8em;
            color: gray;
            display: block;
        }
        button {
            margin-top: 5px;
            background: red;
            color: white;
            border: none;
            padding: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Open Research Chat</h1>
        </header>
        <section id="commentContainer">
            <h2>Leave a Comment</h2>
            <textarea id="commentInput" class="comment-box" placeholder="Type your comment..."></textarea>
            <button onclick="postComment()">Post</button>
        </section>
        <section id="commentsSection">
            <h2>Comments</h2>
            <div id="commentList"></div>
        </section>
    </div>
</body>
</html>

